 {% load static %}
{% static "images" as baseUrl %}
 <!-- /*
* Bootstrap 5
* Template Name: Furni
* Template Author: Untree.co
* Template URI: https://untree.co/
* License: https://creativecommons.org/licenses/by/3.0/
*/ -->
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="author" content="Untree.co">
  <link rel="shortcut icon" href="{% static 'favicon.png' %}">

  <meta name="description" content="" />
  <meta name="keywords" content="bootstrap, bootstrap4" />

		<!-- Bootstrap CSS -->
		<link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet">
		<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
		<link href="{% static 'css/tiny-slider.css' %}" rel="stylesheet">
		<link href="{% static 'css/style.css' %}" rel="stylesheet">
		<title>Furni Free Bootstrap 5 Template for Furniture and Interior Design Websites by Untree.co </title>
	</head>


	<body>

		<!-- Start Header/Navigation -->
		<nav class="custom-navbar navbar navbar navbar-expand-md navbar-dark bg-dark" arial-label="Furni navigation bar">

			<div class="container">
				<a class="navbar-brand" href="">Devi<span>.</span></a>

				<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarsFurni" aria-controls="navbarsFurni" aria-expanded="false" aria-label="Toggle navigation">
					<span class="navbar-toggler-icon"></span>
				</button>

				<div class="collapse navbar-collapse" id="navbarsFurni">
					<ul class="custom-navbar-nav navbar-nav ms-auto mb-2 mb-md-0">
						<li class="nav-item active">
							<a class="nav-link">Home</a>
						</li>
						<li><a class="nav-link" href="shop">Shop</a></li>
						<li><a class="nav-link" href="contact">Contact us</a></li>
					</ul>

					<ul class="custom-navbar-cta navbar-nav mb-2 mb-md-0 ms-5">
                        {% if user.is_authenticated %}
                             {% if user.is_superuser %}
                             <li class="nav-item"><a class="nav-link">Hello, {{ user.first_name }}</a></li>
                             <li><a class="nav-link" href="admin_options">Admin Options</a></li>    
                             <li><a class="nav-link" href="logout"><img src="{% static 'images/user.svg' %}"></a></li>
                            {% else %}
                            <li class="nav-item"><a class="nav-link">Hello, {{ user.first_name }}</a></li>
                            <li><a class="nav-link" href="cart"><img src="{% static 'images/cart.svg' %}"></a></li>
                            <li><a class="nav-link" href=>{{ cart_count }}
                            <li><a class="nav-link" href="logout"><img src="{% static 'images/user.svg' %}"></a></li>
                            {% endif %}
                        {% else %}
                           <li><a class="nav-link" href="login"><img src="{% static 'images/user.svg' %}"></a></li>
                        {% endif %}
					</ul>
				</div>
			</div>
				
		</nav>
		<!-- End Header/Navigation -->

		{% block content %}
            <!-- Start Hero Section -->
                <div class="hero">
                    <div class="container">
                        <div class="row justify-content-between">
                            <div class="col-lg-5">
                                <div class="intro-excerpt">
                                    <h1>Online  <span clsas="d-block">Device Shop</span></h1>
                                    <p class="mb-4">Welcome to Devi.</p>
                                    <p class="mb-4">The best place to shop for all yor devices.</p>
                                    <p><a href="shop" class="btn btn-secondary me-2">Shop Now</a></p>
                                </div>
                            </div>
                            <div class="col-lg-7">
                                <div class="hero-img-wrap">
                                    <img src="{% static 'images/main.png' %}" class="img-fluid">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            <!-- End Hero Section -->
    
            <!-- Start Product Section -->
            <div class="product-section">
                <div class="container">
                    <div class="row">
    
                        <!-- Start Column 1 -->
                        <div class="col-md-12 col-lg-3 mb-5 mb-lg-0">
                            <h2 class="mb-4 section-title">Sourced from Manufacturers.</h2>
                            <p class="mb-4">Our devices are sourced directly from Manufacturers. Ensuring quality to our customers. </p>
                            <p><a href="shop" class="btn">Explore</a></p>
                        </div> 
                        <!-- End Column 1 -->
                        {% for product in products %}
                        <!-- Start Column 2 -->
                            {% if user.is_authenticated %}
                                <div class="col-12 col-md-4 col-lg-3 mb-5 mb-md-0">
                                    <a class="product-item" href="shop">
                                        <img src="{{ product.image.url }}" class="img-fluid product-thumbnail">
                                        <h3 class="product-title">{{ product.name }}</h3>
                                        <strong class="product-price">${{ product.price }}</strong>
                                    </a>
                                </div>
                            {% else %}
                                <div class="col-12 col-md-4 col-lg-3 mb-5 mb-md-0">
                                    <a class="product-item">
                                        <img src="{{ product.image.url }}" class="img-fluid product-thumbnail">
                                        <h3 class="product-title">{{ product.name }}</h3>
                                        <strong class="product-price">${{ product.price }}</strong>
                                    </a>
                                </div>
                            {% endif %}
                        {% empty %}
                        <p>No products available.</p>
                        {% endfor %}
                    </div>
                </div>
            </div>
            <!-- End Product Section -->
    
            <!-- Start Why Choose Us Section -->
            <div class="why-choose-section">
                <div class="container">
                    <div class="row justify-content-between">
                        <div class="col-lg-6">
                            <h2 class="section-title">Why Choose Us</h2>
                            
    
                            <div class="row my-5">
                                <div class="col-6 col-md-6">
                                    <div class="feature">
                                        <div class="icon">
                                            <img src="{% static 'images/truck.svg' %}" alt="Image" class="imf-fluid">
                                        </div>
                                        <h3>Fast &amp; Free Shipping</h3>
                                        
                                    </div>
                                </div>
    
                                <div class="col-6 col-md-6">
                                    <div class="feature">
                                        <div class="icon">
                                            <img src="{% static 'images/bag.svg' %}" alt="Image" class="imf-fluid">
                                        </div>
                                        <h3>Easy to Shop</h3>
                                        
                                    </div>
                                </div>
    
                                <div class="col-6 col-md-6">
                                    <div class="feature">
                                        <div class="icon">
                                            <img src="{% static 'images/support.svg' %}" alt="Image" class="imf-fluid">
                                        </div>
                                        <h3>24/7 Support</h3>
                                        
                                    </div>
                                </div>
    
                                <div class="col-6 col-md-6">
                                    <div class="feature">
                                        <div class="icon">
                                            <img src="{% static 'images/return.svg' %}" alt="Image" class="imf-fluid">
                                        </div>
                                        <h3>Hassle Free Returns</h3>
                                        
                                    </div>
                                </div>
    
                            </div>
                        </div>
    
                        <div class="col-lg-5">
                            <div class="img-wrap">
                                <img src="{% static 'images/choose.jpeg' %}" alt="Image" class="img-fluid">
                            </div>
                        </div>
    
                    </div>
                </div>
            </div>
            <!-- End Why Choose Us Section -->
    
            <!-- Start We Help Section -->
            <div class="we-help-section">
                <div class="container">
                    <div class="row justify-content-between">
                        <div class="col-lg-7 mb-5 mb-lg-0">
                            <div class="imgs-grid">
                                <div class="grid grid-1"><img src="{% static 'images/device.jpeg' %}" alt="Untree.co"></div>
                                <div class="grid grid-2"><img src="{% static 'images/Ps5.jpeg' %}" alt="Untree.co"></div>
                                <div class="grid grid-3"><img src="{% static 'images/pinky.jpeg' %}" alt="Untree.co"></div>
                            </div>
                        </div>
                        <div class="col-lg-5 ps-lg-5">
                            <h2 class="section-title mb-4">We Help You Choose The Right Devices</h2>
                            <p>Choose the right devices at affordable prices. We bring you QUALITY</p>
    
                            <ul class="list-unstyled custom-list my-4">
                                <li>Price</li>
                                <li>Relevance</li>
                                <li>Reliability</li>
                                <li>Quality</li>
                            </ul>
                            <p><a href="shop" class="btn">Explore</a></p>
                        </div>
                    </div>
                </div>
            </div>
            <!-- End We Help Section -->
    
            <!-- Start Popular Product -->
            <div class="popular-product">
                <div class="container">
                    <div class="row">
    
                        <div class="col-12 col-md-6 col-lg-4 mb-4 mb-lg-0">
                            <div class="product-item-sm d-flex">
                                <div class="thumbnail">
                                    <img src="{% static 'images/phone.png' %}" alt="Image" class="img-fluid">
                                </div>
                                <div class="pt-3">
                                    <h3>Phones</h3>
                                    <p>Explore our phone selections</p>
                                    <p><a href="#">Read More</a></p>
                                </div>
                            </div>
                        </div>
    
                        <div class="col-12 col-md-6 col-lg-4 mb-4 mb-lg-0">
                            <div class="product-item-sm d-flex">
                                <div class="thumbnail">
                                    <img src="{% static 'images/laptop.png' %}" alt="Image" class="img-fluid">
                                </div>
                                <div class="pt-3">
                                    <h3>Laptop</h3>
                                    <p>Explore our laptop selection</p>
                                    <p><a href="#">Read More</a></p>
                                </div>
                            </div>
                        </div>
    
                        <div class="col-12 col-md-6 col-lg-4 mb-4 mb-lg-0">
                            <div class="product-item-sm d-flex">
                                <div class="thumbnail">
                                    <img src="{% static 'images/console.png' %}" alt="Image" class="img-fluid">
                                </div>
                                <div class="pt-3">
                                    <h3>Console</h3>
                                    <p>Explore our Console </p>
                                    <p><a href="#">Read More</a></p>
                                </div>
                            </div>
                        </div>
    
                    </div>
                </div>
            </div>
        
        {% endblock %}
		<!-- Start Footer Section -->
		<footer class="footer-section">
			<div class="container relative">

				<div class="sofa-img">
					<img src="{% static 'images/headphone.png' %}" alt="Image" class="img-fluid">
				</div>

				<div class="row">
					<div class="col-lg-8">
						<div class="subscription-form">
							<h3 class="d-flex align-items-center"><span class="me-1"><img src="{% static 'images/envelope-outline.svg' %}" alt="Image" class="img-fluid"></span><span>Subscribe to Newsletter</span></h3>

							<form action="#" class="row g-3">
								<div class="col-auto">
									<input type="text" class="form-control" placeholder="Enter your name">
								</div>
								<div class="col-auto">
									<input type="email" class="form-control" placeholder="Enter your email">
								</div>
								<div class="col-auto">
									<button class="btn btn-primary">
										<span class="fa fa-paper-plane"></span>
									</button>
								</div>
							</form>

						</div>
					</div>
				</div>

				<div class="row g-5 mb-5">
					<div class="col-lg-4">
						<div class="mb-4 footer-logo-wrap"><a href="#" class="footer-logo">Devi<span>.</span></a></div>
						<p class="mb-4">Your home of quality devices.</p>

						<ul class="list-unstyled custom-social">
							<li><a href="#"><span class="fa fa-brands fa-facebook-f"></span></a></li>
							<li><a href="#"><span class="fa fa-brands fa-twitter"></span></a></li>
							<li><a href="#"><span class="fa fa-brands fa-instagram"></span></a></li>
							<li><a href="#"><span class="fa fa-brands fa-linkedin"></span></a></li>
						</ul>
					</div>
                </div>
            </div>
		</footer>
		<!-- End Footer Section -->	


		<script src="{% static 'js/bootstrap.bundle.min.js' %}"></script>
		<script src="{% static 'js/tiny-slider.js' %}"></script>
		<script src="{% static 'js/custom.js' %}"></script>
	</body>


<!-- In your base template or specific template -->
<script>
    function updateCartCount() {
        fetch("{% url 'api_cart_count' %}")
            .then(response => response.json())
            .then(data => {
                document.querySelector('.cart-info').textContent = 'Items in cart: ' + data.cart_count;
            })
            .catch(error => console.error('Error fetching cart count:', error));
    }

    // Call the function periodically or after specific actions
    document.addEventListener('DOMContentLoaded', () => {
        updateCartCount();
        // Example: Update cart count every 10 seconds
        setInterval(updateCartCount, 10000);
    });
</script>

</html>
